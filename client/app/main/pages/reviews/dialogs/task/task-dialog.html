<md-dialog class="task-dialog" aria-label="New Task">
    <form name="taskForm" class="md-inline-form" novalidate>
        <md-toolbar class="md-accent md-hue-2">
            <div class="md-toolbar-tools" layout="row" layout-align="space-between center">
                <span class="title">{{vm.title}}</span>
                <md-button class="md-icon-button" ng-click="vm.closeDialog()">
                    <md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon>
                </md-button>
            </div>
        </md-toolbar>

        <md-dialog-content ms-scroll>
            <md-content class="md-block">
                <label>{{vm.title}}</label>
            </md-content>
            <br/>
            <md-input-container class="md-block">
                <label translate="REVIEW.COMMENTS">Comments</label>
                <textarea ng-model="vm.task.notes" maxlength="150"
                  md-maxlength="150" rows="1" md-select-on-focus
                placeholder="Escribe tus notas acÃ¡!"></textarea>
            </md-input-container>

            <div class="md-block"
              flow-init="vm.ngFlowOptions"
              flow-name="vm.ngFlow.flow"
              flow-files-submitted="vm.upload()"
              flow-file-added="vm.fileAdded($file)"
              flow-file-success="vm.fileSuccess($file, $message)"
              flow-complete="vm.uploadComplete()"
            >
              <label>Subir imagenes</label>
              <md-button class="md-icon-button" aria-label="Insert picture" flow-btn>
                <md-icon md-font-icon="icon-file-image-box"></md-icon>
              </md-button>
              <div ng-if="vm.task.photos.url">
                <div class="attachment-list">
                  <div class="attachment" layout="row" layout-align="space-between center">
                    <img ng-src="{{vm.task.photos.url}}" />
                    <md-button class="md-icon-button" aria-label="Delete attachment" ng-click="vm.deleteImage()">
                      <md-icon md-font-icon="icon-close" class="s16"></md-icon>
                    </md-button>
                  </div>
                </div>
              </div>

            </div>


              <!--<div class="attachment" layout="row" layout-align="space-between center" ng-repeat="f in vm.task.photos">
                  <div>
                      <img ngf-src="f" alt="pic">
                  </div>
                  <div ng-repeat="f in vm.errFiles" style="font:smaller">
                      {{f.name}} {{f.$error}} {{f.$errorParam}} {{errorMsg}}
                  </div>

                  <md-button class="md-icon-button" aria-label="Delete attachment" ng-click="vm.deleteImage(vm, f)">
                      <md-icon md-font-icon="icon-close" class="s16"></md-icon>
                  </md-button>
              </div>-->

        </md-dialog-content>

        <md-dialog-actions layout="row" layout-align="space-between center">
            <div layout="row">
                <md-button type="submit" ng-if="!vm.newTask" ng-click="vm.saveTask()"
                           class="send-button md-accent md-raised"
                           ng-disabled="taskForm.$invalid"
                           aria-label="SAVE">
                    GUARDAR NOTAS
                </md-button>
            </div>
        </md-dialog-actions>
    </form>
</md-dialog>
